<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CarLang Parser Test</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        .panel {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        textarea {
            width: 100%;
            height: 300px;
            font-family: 'Courier New', monospace;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 10px;
            resize: vertical;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #0056b3;
        }
        pre {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        .error {
            color: #dc3545;
        }
        .success {
            color: #28a745;
        }
        h1 {
            text-align: center;
            color: #333;
        }
    </style>
</head>
<body>
    <h1>CarLang Parser Test</h1>
    
    <div class="container">
        <div class="panel">
            <h3>Input CarLang Code</h3>
            <textarea id="inputCode" placeholder="Enter CarLang code here...">// Example CarLang code
int x = 5;
string message = "Hello World";

if (x > 3) {
    moveForward();
    rotate(90);
} else {
    moveBackward();
}

while (x > 0) {
    moveForward();
    x = x - 1;
}

for (int i = 0; i < 3; i = i + 1) {
    rotate(90);
    moveForward();
}</textarea>
            <div>
                <button onclick="parseCode()">Parse Code</button>
                <button onclick="loadExample()">Load Example</button>
                <button onclick="clearOutput()">Clear Output</button>
            </div>
        </div>
        
        <div class="panel">
            <h3>Parser Output</h3>
            <pre id="output">Click "Parse Code" to see the result...</pre>
        </div>
    </div>

    <script src="Assets/Scripts/carlang-parser.js"></script>
    <script src="Assets/Scripts/parser-test.js"></script>
    <script>
        function parseCode() {
            const input = document.getElementById('inputCode').value;
            const output = document.getElementById('output');
            
            try {
                const parser = new CarLangParser();
                const result = parser.parse(input);
                
                let outputText = 'Parsing Result:\n';
                outputText += JSON.stringify(result, null, 2);
                
                if (result.errors && result.errors.length > 0) {
                    outputText += '\n\nParsing Errors:\n';
                    result.errors.forEach(error => {
                        outputText += `- ${error}\n`;
                    });
                    output.className = 'error';
                } else {
                    outputText += '\n\nâœ… Parsing completed successfully!';
                    output.className = 'success';
                }
                
                output.textContent = outputText;
            } catch (error) {
                output.textContent = `Error: ${error.message}`;
                output.className = 'error';
            }
        }
        
        function loadExample() {
            const exampleCode = `// CarLang Example with all features
int counter = 0;
string direction = "forward";

// Variable declaration and assignment
double speed = 1.5;
counter = 10;

// If statement
if (counter > 5) {
    moveForward();
    rotate(90);
} else if (counter > 0) {
    moveBackward();
} else {
    rotate(180);
}

// While loop
while (counter > 0) {
    moveForward();
    counter = counter - 1;
}

// For loop
for (int i = 0; i < 3; i = i + 1) {
    rotate(90);
    moveForward();
}

// Switch statement
switch (counter) {
    case 1:
        moveForward();
        break;
    case 2:
        rotate(90);
        break;
    default:
        moveBackward();
}

// Try-catch block
try {
    moveForward();
} catch (error) {
    rotate(180);
}

// Function calls
moveForward();
rotate(90);
explode();

return;`;
            
            document.getElementById('inputCode').value = exampleCode;
        }
        
        function clearOutput() {
            document.getElementById('output').textContent = 'Click "Parse Code" to see the result...';
            document.getElementById('output').className = '';
        }
        
        // Auto-parse on page load
        window.addEventListener('load', () => {
            setTimeout(parseCode, 100);
        });
    </script>
</body>
</html> 
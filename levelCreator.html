<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Level Creator - sdRacer</title>
    <link rel="stylesheet" href="Assets/Styles/newGameStyles.css">
</head>
<body>
    <div class="content">
        <div class="title">
            <h1>Level Creator - sdRacer</h1>
        </div>
        
        <div class="explanation">
            <p><strong>Experimental tool</strong> - Create custom levels for sdRacer.</p>
            <p><strong>Quick Start:</strong> Set grid size → Place roads (click between cells) → Place car & finish → Add level info → Export JSON or Play</p>
            <p><strong>Tips:</strong> Roads connect by clicking between cells. Max 1 car per color. Multiple cars enables OOP mode. Cows require 2 clicks (start cell, move-to cell). Use Generate Maze for automatic maze creation.</p>
        </div>
        
        <div class="creator-main">
            <div class="left-column">
                <!-- LEVEL MANAGEMENT PANEL -->
                <div class="panel level-management">
                    <h3>Level Management</h3>
                    
                    <div class="section grid-settings">
                        <label>Width (columns): <input type="number" id="width" min="1" value="4"></label>
                        <label>Height (rows): <input type="number" id="height" min="1" value="4"></label>
                        <button id="createLevelBtn">Create Level</button>
                        <button id="generateMazeBtn">Generate Maze</button>
                    </div>
                    
                    <div class="section import-export">
                        <button id="showJsonBtn">Export JSON</button>
                        <button id="loadJsonBtn">Import JSON</button>
                        <textarea id="jsonArea" placeholder="Paste level JSON here..."></textarea>
                    </div>
                    
                    <div class="section load-existing">
                        <label>Load Existing Level:</label>
                        <select id="levelSelector">
                            <option value="">Select a level...</option>
                        </select>
                        <button id="loadLevelBtn">Load Level</button>
                    </div>
                    
                    <div class="section play-level">
                        <button id="playLevelBtn">Play Level</button>
                    </div>
                </div>
                
                <!-- LEVEL INFO PANEL -->
                <div class="panel level-info">
                    <h3>Level Information</h3>
                    
                    <div class="section basic-info">
                        <label>Category: <input type="text" id="category" placeholder="e.g., OOP Introduction"></label>
                        <label>Name: <input type="text" id="name" placeholder="e.g., Multi-Car Challenge"></label>
                        <label>Author: <input type="text" id="author" placeholder="Your name"></label>
                    </div>
                    
                    <div class="section win-condition">
                        <label>Win Condition: 
                            <select id="winCondition">
                                <option value="IsAtFinish()">IsAtFinish() - Any car reaches finish</option>
                                <option value="AllCarsAtFinish()">AllCarsAtFinish() - All cars must reach finish</option>
                                <option value="SpecificCarAtFinish()">SpecificCarAtFinish() - Specific car must reach finish</option>
                            </select>
                        </label>
                    </div>
                    
                    <div class="section instructions-section">
                        <label>Instructions: <textarea id="instructions" placeholder="Explain the level objectives..."></textarea></label>
                    </div>
                    
                    <div class="section default-code-section">
                        <label>Default Code: <textarea id="defaultCode" placeholder="// Write default CarLang code here..."></textarea></label>
                    </div>
                </div>
                
                <!-- CAR MANAGEMENT PANEL -->
                <div class="panel car-management">
                    <div class="panel-header">
                        <h3>Car Management</h3>
                        <span class="experimental-badge">⚠️ Experimental</span>
                    </div>
                    <div class="section car-controls">
                        <button id="addCarBtn">Add Car</button>
                        <button id="clearCarsBtn">Clear All Cars</button>
                    </div>
                    <div id="carList"></div>
                </div>
            </div>
            
            <div class="right-column">
                <!-- LEVEL CREATION CHECKLIST -->
                <div class="panel checklist-panel">
                    <h3>Level Creation Progress</h3>
                    <div class="checklist">
                        <div class="checklist-item" id="checkWorldGenerated">
                            <span class="check-icon">☐</span>
                            <span class="check-label">Level created</span>
                        </div>
                        <div class="checklist-item" id="checkRoadsPlaced">
                            <span class="check-icon">☐</span>
                            <span class="check-label">Roads placed</span>
                        </div>
                        <div class="checklist-item" id="checkCarPlaced">
                            <span class="check-icon">☐</span>
                            <span class="check-label">Car placed</span>
                        </div>
                        <div class="checklist-item" id="checkFinishPlaced">
                            <span class="check-icon">☐</span>
                            <span class="check-label">Finish placed</span>
                        </div>
                        <div class="checklist-item" id="checkLevelInfo">
                            <span class="check-icon">☐</span>
                            <span class="check-label">Level information entered</span>
                        </div>
                    </div>
                </div>
                
                <!-- PLACEMENT TOOLS PANEL -->
                <div class="panel placement-tools">
                    <h3>Placement Tools</h3>
                    
                    <div class="tool-group">
                        <span class="tool-label">Cars:</span>
                        <span id="redCarIcon" class="tool-icon red-car"></span>
                        <span id="blueCarIcon" class="tool-icon blue-car"></span>
                        <span id="greenCarIcon" class="tool-icon green-car"></span>
                        <span id="yellowCarIcon" class="tool-icon yellow-car"></span>
                    </div>
                    
                    <div class="tool-group">
                        <span class="tool-label">Objects:</span>
                        <span id="finishIcon" class="tool-icon finish-icon"></span>
                        <span id="cowIcon" class="tool-icon cow-icon"></span>
                        <span id="trafficLightIcon" class="tool-icon traffic-light-icon"></span>
                    </div>
                    
                    <div id="placementStatus" class="placement-status">Click an icon to start placing objects</div>
                </div>
                
                <!-- GAME GRID PANEL -->
                <div class="panel game-grid">
                    <div id="levelGrid" class="level-grid"></div>
                    
                    <div class="grid-info">
                        <span>Grid: <span id="gridSizeInfo">4x4</span></span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Car Configuration Modal -->
    <div id="carModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Configure Car</h3>
                <button class="close-btn" id="closeCarModal">×</button>
            </div>
            <div class="modal-body">
                <label>Car Name: <input type="text" id="carName" placeholder="e.g., redCar"></label>
                <label>Car Type: 
                    <select id="carType">
                        <option value="red">Red Car</option>
                        <option value="blue">Blue Car</option>
                        <option value="green">Green Car</option>
                        <option value="yellow">Yellow Car</option>
                        <option value="default">Default Car</option>
                    </select>
                </label>
                <label>Direction: 
                    <select id="carDirection">
                        <option value="N">North (↑)</option>
                        <option value="E">East (→)</option>
                        <option value="S">South (↓)</option>
                        <option value="W">West (←)</option>
                    </select>
                </label>
                <div class="modal-buttons">
                    <button id="saveCarBtn">Save Car</button>
                    <button id="cancelCarBtn">Cancel</button>
                </div>
            </div>
        </div>
    </div>
    
    <script type="module" src="Assets/Scripts/mazeCreator.js"></script>
    <script type="module" src="Assets/Scripts/levelCreator.js"></script>
</body>
</html>
